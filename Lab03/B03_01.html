<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>B03 01</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <button class="btn btn-success mt-3" id="run">Run</button>
    <div class="mt-3" id="res"></div>
  </div>

  <script>
    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function f1() {
      await delay(300);
      if (Math.random() < 0.5) throw new Error("Щось пішло не так...");
      return "f1 ok";
    }

    async function f2() {
      await delay(300);
      if (Math.random() < 0.5) throw new Error("Щось пішло не так...");
      return "f2 ok";
    }

    async function runAny() {
      $("#res").text("Running...");
      try {
        const ok = await Promise.any([f1(), f2()]);
        $("#res").text("Success: " + ok);
      } catch (e) {
        $("#res").text("Fail: all promises rejected");
      }
    }

    function main() {
      $("#run").on("click", runAny);
    }

    main();
  </script>
</body>
</html>
